(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,a){},177:function(e,t,a){},181:function(e,t,a){},202:function(e,t,a){},204:function(e,t,a){},206:function(e,t,a){},208:function(e,t,a){},210:function(e,t,a){},213:function(e,t,a){},215:function(e,t,a){},217:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),c=a.n(o),s=a(2),l=a(63),i=a(9),u=a(64),p=a(65),d=a(66),m=a.n(d),h=a(39),E=a(5),f=a(15),b={loading:!1,loggedIn:!1,token:null,message:null,user:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token/REQUEST":return Object(E.a)({},e,{loading:!0});case"token/REQUEST_SUCCESS":return Object(E.a)({},e,{loggedIn:!0,loading:!1,token:t.payload.token,user:t.payload.user.data});case"token/REQUEST_FAIL":return Object(E.a)({},e,{loading:!1,message:"Error"});case"token/LOGOUT":return Object(E.a)({},e,{loggedIn:!1,token:null,user:null});default:return e}},v={showModal:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;switch((arguments.length>1?arguments[1]:void 0).type){case"modal/SHOW":return Object(E.a)({},e,{showModal:!e.showModal});default:return e}},y=Object(i.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/REQUEST":return Object(E.a)({},e,{loading:!0,error:null});case"posts/REQUEST_SUCCESS":return Object(E.a)({},e,{loading:!1,posts:t.data});case"posts/REQUEST_FAIL":return Object(E.a)({},e,{loading:!1,error:t.error,posts:null});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"post/REQUEST":case"post-update/REQUEST":return Object(E.a)({},e,{loading:!0});case"post/REQUEST_SUCCESS":return Object(f.toast)("the publication was created correctly"),Object(E.a)({},e,{loading:!1});case"post-update/REQUEST_SUCCESS":return Object(f.toast)("the publication was updated correctly"),Object(E.a)({},e,{loading:!1});case"post/REQUEST_FAIL":case"post-update/REQUEST_FAIL":return f.toast.error(t.error),Object(E.a)({},e,{loading:!1,error:t.error});default:return e}},auth:g,ui:O}),S={key:"root",storage:m.a,blacklist:["post"]},k=Object(h.a)(S,y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(223),j=a(225),w=a(224),T=a(226),N=function(){return r.a.createElement("div",{className:"l-container container"},"Error 404")},U=(a(89),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"dot1"}),r.a.createElement("div",{className:"dot2"}))}),x=a(67),C=a.n(x),R=a(222),Q=a(68),L=a.n(Q),P=(a(171),function(e){return r.a.createElement("button",{className:"button "+e.theme,onClick:e.onClick,type:"button"},e.text)}),I=a(11),A=a(12),F=a(20),M=a(19),q=a(21),D=(a(175),a(177),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("input",{onChange:e.onChange,value:e.value,id:e.id,className:"input "+e.theme,type:e.type,minLength:e.minLength,name:e.name,placeholder:e.placeholder,required:e.required,defaultValue:e.default,autoComplete:e.autoComplete,disabled:e.disabled,ref:e.ref}))}),W=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"button "+e.theme,value:e.text,disabled:e.disabled}))},z=(a(181),function(e){return r.a.createElement("div",null,r.a.createElement("label",{className:""},e.label),r.a.createElement("textarea",{cols:"30",rows:"15",value:e.value,id:e.id,className:"input "+e.theme,type:e.type,minLength:e.minLength,name:e.name,placeholder:e.placeholder,required:e.required,defaultValue:e.default,disabled:e.disabled,ref:e.ref}))}),B=a(28),H=a(10),G=a.n(H),V=a(16),J=a(17),$=a.n(J),K=function(){function e(){Object(I.a)(this,e)}return Object(A.a)(e,null,[{key:"get",value:function(e){return $.a.get("".concat("https://api.github.com","/").concat(e))}},{key:"post",value:function(e,t){return $()({method:"POST",url:"https://api.github.com/gists",data:e,headers:{"Content-Type":"application/json",authorization:"token ".concat(t)}})}},{key:"update",value:function(e,t,a){return $()({method:"PATCH",url:"https://api.github.com/gists/".concat(e),data:t,headers:{"Content-Type":"application/json",authorization:"token ".concat(a)}})}}]),e}(),X=("https://github.com/login/oauth/authorize?client_id=".concat("a9b9a9cdd993b995f360","&scope=user,gist&redirect_uri=").concat("https://andres9722.github.io/blog/"),function(){function e(){Object(I.a)(this,e)}return Object(A.a)(e,null,[{key:"requestUser",value:function(e){return $.a.get("".concat("https://api.github.com/user?access_token=").concat(e))}},{key:"requestToken",value:function(e){return console.log(e),$.a.get("".concat("https://blogauth0.herokuapp.com/authenticate","/").concat(e))}}]),e}()),Y=function(e){return function(){var t=Object(V.a)(G.a.mark(function t(a){var n,r;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:"posts/REQUEST"}),""!==e){t.next=3;break}return t.abrupt("return",a({type:"posts/REQUEST_SUCCESS",data:null}));case 3:return t.prev=3,t.next=6,K.get("users/".concat(e.trim(),"/gists"));case 6:return n=t.sent,r=n.data,t.abrupt("return",a({type:"posts/REQUEST_SUCCESS",data:r}));case 11:t.prev=11,t.t0=t.catch(3),a({type:"posts/REQUEST_FAIL",error:t.t0.message});case 14:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},Z=(a(202),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).handleOnSubmit=function(e){e.preventDefault();var t=a.props,n=t.handleOnCreatePost,r=t.handleOnUpdatePost,o=t.auth,c=o.token,s=o.user,l=t.update,i=t.postToUpdate,u=e.target,p={description:u.description.value,public:!0,files:{"post.md":{content:u.content.value}}};l?r(i.id,p,c):n(p,c,s)},a}return Object(q.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=B.entityTitle,t=B.updateEntityTitle,a=B.entityFields,n=this.props,o=n.post.loading,c=n.update,s=n.postToUpdate;return r.a.createElement("section",{className:"form-container"},r.a.createElement("h1",{className:"headline"},c?t:e),r.a.createElement("form",{className:"form",onSubmit:this.handleOnSubmit},a.map(function(e){return"input"===e.kind?r.a.createElement(D,{type:e.type,name:e.name,id:e.id,placeholder:e.placeholder,key:e.id,required:!0,default:s&&s[e.name]}):"textarea"===e.kind?r.a.createElement(z,{name:e.name,id:e.id,placeholder:e.placeholder,key:e.id,required:!0,default:s&&s.files&&s.files["post.md"]&&s.files["post.md"].content}):null}),o&&r.a.createElement(U,null),r.a.createElement(f.ToastContainer,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,pauseOnVisibilityChange:!0}),r.a.createElement(W,{theme:"button--secondary",text:"Publish"})))}}]),t}(n.Component)),ee=Object(s.b)(function(e){return{auth:e.auth,post:e.post}},function(e){return{handleOnCreatePost:function(t,a,n){e(function(e,t){return function(){var a=Object(V.a)(G.a.mark(function a(n){return G.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"post/REQUEST"}),a.prev=1,a.next=4,K.post(e,t);case 4:return a.abrupt("return",n({type:"post/REQUEST_SUCCESS"}));case 7:a.prev=7,a.t0=a.catch(1),n({type:"post/REQUEST_FAIL",error:a.t0.message});case 10:case"end":return a.stop()}},a,this,[[1,7]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))},handleOnUpdatePost:function(t,a,n){e(function(e,t,a){return function(){var n=Object(V.a)(G.a.mark(function n(r){return G.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"post-update/REQUEST"}),n.prev=1,n.next=4,K.update(e,t,a);case 4:return n.abrupt("return",r({type:"post-update/REQUEST_SUCCESS"}));case 7:n.prev=7,n.t0=n.catch(1),r({type:"post-update/REQUEST_FAIL",error:n.t0.message});case 10:case"end":return n.stop()}},n,this,[[1,7]])}));return function(e){return n.apply(this,arguments)}}()}(t,a,n))}}})(Z),te=(a(204),function(e){var t=e.show,a=e.closeModal,n=e.children;return r.a.createElement("div",{id:"modal",className:t?"modal--show modal":"modal"},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__close",onClick:a},r.a.createElement("span",{className:"icon-close icon"}),"x"),n))}),ae=(a(206),Object(s.b)(function(e){return{auth:e.auth,ui:e.ui}},function(e){return{handleOnShowModal:function(){e({type:"modal/SHOW"})}}})(function(e){var t=e.post,a=e.large,o=e.auth,c=e.ui.showModal,s=e.handleOnShowModal;return r.a.createElement(n.Fragment,null,t&&r.a.createElement("li",{id:"posts-item",className:a?"posts-item posts-item--large":"posts-item"},r.a.createElement("h6",null,new Date(t.updated_at).toDateString().slice(4)," ","-"," ",r.a.createElement(C.a,{date:t.updated_at})),r.a.createElement("div",{className:"posts-item__content"},r.a.createElement("p",{className:"posts-item__description"},t.description),!a&&r.a.createElement("div",{className:"posts-item__post"},r.a.createElement(R.a,{className:"posts-item__link",to:"/post/".concat(t.id)},"Read"))),o.user&&t.owner.login===o.user.login&&a&&r.a.createElement(P,{onClick:s,theme:"button--secondary posts-item--edit",text:"Edit"}),a&&r.a.createElement("div",null,Object.values(t.files).map(function(e,t){return r.a.createElement("div",{key:t,className:"posts-item__text"},r.a.createElement(L.a,{source:e.content}))})),r.a.createElement(te,{show:c,closeModal:s},r.a.createElement(ee,{update:!0,postToUpdate:t}))))})),ne=(a(208),a(210),Object(s.b)(null,function(e){return{handleOnSearch:function(t){e(Y(t))}}})(function(e){var t=e.handleOnSearch;return r.a.createElement("section",{className:"form-container"},r.a.createElement("form",{className:"form-search",onSubmit:function(e){e.preventDefault(),t(e.target.username.value)}},r.a.createElement("h1",{className:"headline"},"SEARCH"),r.a.createElement(D,{onChange:function(e){""===e.target.value&&t("")},name:"username",placeholder:"Username..."})))})),re=Object(s.b)(function(e){return{posts:e.posts}})(function(e){var t=e.posts,a=t.posts,n=t.loading,o=t.error;return r.a.createElement("div",null,r.a.createElement(ne,{posts:!!a}),a&&a[0]&&r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{className:"posts-item__avatar",src:a[0].owner.avatar_url&&a[0].owner.avatar_url,alt:"avatar url"}),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a[0].owner.html_url,className:"posts-item__author"},a[0].owner.login)),r.a.createElement("ul",{className:a?"posts posts--show":"posts"},r.a.createElement("h5",null,"POSTS"),a&&a.map(function(e){return e.description&&r.a.createElement(ae,{key:e.id,post:e})})),n&&r.a.createElement("div",{className:"loader"},r.a.createElement(U,null)),a&&!a.length&&r.a.createElement("p",{className:"posts__error"},"This user has not made any publication"),o&&r.a.createElement("p",{className:"posts__error"},o))}),oe=Object(s.b)(function(e){return{auth:e.auth}})(function(e){var t=e.posts;return r.a.createElement("div",{className:"l-container container container--auth"},r.a.createElement(ee,null),r.a.createElement(re,{posts:t}))}),ce=function(e){function t(){return Object(I.a)(this,t),Object(F.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getToken,t=this.props.location.search.replace("?code=","");t&&e(t)}},{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",{className:"l-container container"},r.a.createElement(re,{posts:e}))}}]),t}(n.Component),se=Object(s.b)(function(e){return{auth:e.auth,posts:e.posts}},function(e){return{getToken:function(t){e(function(e){return function(){var t=Object(V.a)(G.a.mark(function t(a){var n,r,o,c,s;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"token/REQUEST"}),t.prev=1,t.next=4,X.requestToken(e);case 4:return n=t.sent,r=n.data,t.next=8,r.token;case 8:return o=t.sent,t.next=11,X.requestUser(o);case 11:return c=t.sent,s={token:o,user:c},Y(c.login),t.abrupt("return",a({type:"token/REQUEST_SUCCESS",payload:s}));case 17:t.prev=17,t.t0=t.catch(1),a({type:"token/REQUEST_FAIL"});case 20:case"end":return t.stop()}},t,this,[[1,17]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(ce),le=a(69),ie=a.n(le),ue=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).state={post:null,loading:null,index:null},a.getPost=function(){var e=Object(V.a)(G.a.mark(function e(t){var n,r,o;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0,post:null}),e.prev=1,e.next=4,K.get("gists/".concat(t.id));case 4:n=e.sent,r=n.data,o=a.props.posts.posts,a.setState({post:r,loading:!1,index:o.findIndex(function(e){return e.id===r.id})+1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(q.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.getPost(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params;this.getPost(t)}},{key:"render",value:function(){var e=this.state,t=e.post,a=e.loading,n=this.props.posts.posts;return r.a.createElement("div",{className:"l-container container"},n[this.state.index]&&r.a.createElement(R.a,{className:"next",to:"/post/".concat(n[this.state.index].id)},r.a.createElement("img",{className:"next__img",src:ie.a,alt:"arrow"})),t&&r.a.createElement(ae,{large:!0,post:t}),a&&r.a.createElement("div",{className:"posts-item__loader"},r.a.createElement(U,null)))}}]),t}(n.Component),pe=Object(s.b)(function(e){return{posts:e.posts}})(ue),de=function(e){var t=e.component,a=e.authed,n=e.rest;return r.a.createElement(j.a,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(w.a,{to:{pathname:"/blog/",state:{from:e.location}}})}}))},me=function(e){var t=e.component,a=e.authed,n=e.rest;return r.a.createElement(j.a,Object.assign({},n,{render:function(e){return!1===a?r.a.createElement(t,e):r.a.createElement(w.a,{to:"/posts/"})}}))},he=function(e){var t=e.authed;return r.a.createElement(n.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(me,{path:"/blog/",authed:t,exact:!0,component:se}),r.a.createElement(de,{path:"/posts/",authed:t,exact:!0,component:oe}),r.a.createElement(j.a,{path:"/post/:id",authed:t,exact:!0,component:pe}),r.a.createElement(j.a,{component:N})))},Ee=(a(213),Object(s.b)(function(e){return{auth:e.auth}},function(e){return{handleOnLogout:function(){e({type:"token/LOGOUT"})},handleOnSearch:function(t){e(Y(t))}}})(function(e){var t=e.handleOnLogout,a=e.auth,n=a.loggedIn,o=a.user;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-container l-container"},r.a.createElement(R.a,{className:"header__link",to:n?"/posts/":"/blog/"},"BLOG"),!n&&r.a.createElement("a",{style:{color:"white"},href:"https://github.com/login/oauth/authorize?client_id=a9b9a9cdd993b995f360&scope=gist,user"},"Sign in"),n&&o&&r.a.createElement("div",{className:"header__profile"},r.a.createElement("span",null,o.login),r.a.createElement("img",{className:"header__avatar",src:o.avatar_url,alt:""}),r.a.createElement(P,{text:"Logout",onClick:function(){return t()}}))))})),fe=(a(215),Object(s.b)(function(e){return{auth:e.auth}})(function(e){var t=e.auth.loggedIn;return r.a.createElement(_.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(Ee,null),r.a.createElement(he,{authed:t})))})),be=(a(217),function(){var e=Object(i.createStore)(k,Object(p.composeWithDevTools)(Object(i.applyMiddleware)(u.a)));return{store:e,persistor:Object(h.b)(e)}}()),ge=be.store,ve=be.persistor;c.a.render(r.a.createElement(s.a,{store:ge},r.a.createElement(l.a,{loading:null,persistor:ve},r.a.createElement(fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e){e.exports={entityTitle:"NEW POST",updateEntityTitle:"UPDATE POST",entityFields:[{kind:"input",type:"text",name:"description",id:"description",placeholder:"Title..."},{kind:"textarea",type:"text",name:"content",id:"content",placeholder:"Text..."}]}},69:function(e,t,a){e.exports=a.p+"static/media/right-arrow.57dc2b47.svg"},70:function(e,t,a){e.exports=a(221)},89:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.80e3494e.chunk.js.map