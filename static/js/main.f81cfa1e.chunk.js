(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(89)},49:function(e,t,n){},75:function(e,t,n){},79:function(e,t,n){},83:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),o=n.n(c),u=n(7),i=n(35),s=n(6),l=n(36),p=n(37),d=n(38),m=n.n(d),h=n(22),E=n(8),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/REQUEST":return Object(E.a)({},e,{loading:!0});case"posts/REQUEST_SUCCESS":return Object(E.a)({},e,{loading:!1,posts:t.data});case"posts/REQUEST_FAIL":return Object(E.a)({},e,{loading:!1,error:"Error while fetching data"});default:return e}},b={loading:!1,loggedIn:!1,token:null,message:null,user:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token/REQUEST":return Object(E.a)({},e,{loading:!0});case"token/REQUEST_SUCCESS":return Object(E.a)({},e,{loggedIn:!0,loading:!1,token:t.payload.token,user:t.payload.user.data});case"token/REQUEST_FAIL":return Object(E.a)({},e,{loading:!1,message:"Error"});case"token/LOGOUT":return Object(E.a)({},e,{loggedIn:!1,token:null,user:null});default:return e}},v=Object(s.combineReducers)({posts:f,auth:g}),O={key:"root",storage:m.a},k=Object(h.a)(O,v),y=(n(49),n(12)),S=n(13),j=n(17),w=n(14),_=n(18),U=n(91),T=n(93),R=n(92),C=n(94),x=function(){return r.a.createElement("div",null,"Error 404")},Q=function(){return r.a.createElement("div",null,"Blog")},L=n(10),N=n.n(L),I=n(19),A=n(11),F=n.n(A),D="https://github.com/login/oauth/authorize?client_id=".concat("a9b9a9cdd993b995f360","&scope=user&redirect_uri=").concat("https://andres9722.github.io/blog/"),B=function(e){return F.a.post("".concat("https://github.com/login/oauth/access_token","?client_id=").concat("a9b9a9cdd993b995f360","&client_secret=").concat("4c689dd1d7bc53aa6482bfb09b2edf6d0436cd29","&code=").concat(e))},q=function(e){return F.a.get("".concat("https://api.github.com/user?access_token=").concat(e))},G=function(e){function t(){return Object(y.a)(this,t),Object(j.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getToken,t=this.props.location.search.replace("?code=","");t&&e(t)}},{key:"render",value:function(){return r.a.createElement("div",null,"Hi")}}]),t}(a.Component),M=Object(u.b)(null,function(e){return{getToken:function(t){e(function(e){return function(){var t=Object(I.a)(N.a.mark(function t(n){var a,r,c,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"token/REQUEST"}),t.prev=1,t.next=4,B(e);case 4:return a=t.sent,t.next=7,a.data.replace("access_token=","").replace("&scope=user&token_type=bearer","");case 7:return r=t.sent,t.next=10,q(r);case 10:return c=t.sent,o={token:r,user:c},t.abrupt("return",n({type:"token/REQUEST_SUCCESS",payload:o}));case 15:t.prev=15,t.t0=t.catch(1),n({type:"token/REQUEST_FAIL"});case 18:case"end":return t.stop()}},t,this,[[1,15]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(G),W=function(e){var t=e.component,n=e.authed,a=e.rest;return r.a.createElement(T.a,Object.assign({},a,{render:function(e){return!0===n?r.a.createElement(t,e):r.a.createElement(R.a,{to:{pathname:"/",state:{from:e.location}}})}}))},J=function(e){var t=e.component,n=e.authed,a=e.rest;return r.a.createElement(T.a,Object.assign({},a,{render:function(e){return!1===n?r.a.createElement(t,e):r.a.createElement(R.a,{to:"/blog"})}}))},z=function(e){var t=e.authed;return r.a.createElement(C.a,null,r.a.createElement(J,{path:"/",authed:t,exact:!0,component:M}),r.a.createElement(W,{path:"/blog",authed:t,exact:!0,component:Q}),r.a.createElement(T.a,{component:x}))},H=(n(75),function(e){return r.a.createElement("div",{className:e.classes},r.a.createElement("label",{className:""},e.label),r.a.createElement("input",{value:e.value,id:e.id,className:"input "+e.theme,type:e.type,minLength:e.minLength,name:e.name,placeholder:e.placeholder,required:e.required,defaultValue:e.default,autoComplete:e.autoComplete,disabled:e.disabled,ref:e.ref}))}),V=(n(79),function(e){return r.a.createElement("button",{className:"button "+e.className,onClick:e.onClick,id:e.id,type:"button"},e.text)}),$=n(90),K=(n(83),Object(u.b)(function(e){return{auth:e.auth}},function(e){return{handleOnRedirect:function(){e(function(){var e=Object(I.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"redirect/REQUEST"}),e.prev=1,e.next=4,F.a.get("".concat(D));case 4:return n=e.sent,a=n.request.responseURL,window.location=a,e.abrupt("return",t({type:"redirect/REQUEST_SUCCESS"}));case 10:e.prev=10,e.t0=e.catch(1),t({type:"redirect/REQUEST_FAIL"});case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}())},handleOnLogout:function(){e({type:"token/LOGOUT"})}}})(function(e){var t=e.handleOnRedirect,n=e.handleOnLogout,a=e.auth.loggedIn;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-container l-container"},r.a.createElement("div",{className:"header-container__main"},r.a.createElement("h1",{className:"header-container__logo"},"BLOG"),r.a.createElement(H,{placeholder:"Search...",theme:"input--secondary"}),r.a.createElement($.a,{className:"header-container__link",to:a?"/blog":"/"},"All posts")),!a&&r.a.createElement(V,{text:"Sign in",onClick:function(){return t()}}),a&&r.a.createElement(V,{text:"Logout",onClick:function(){return n()}})))})),P=(n(85),n(87),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"dot1"}),r.a.createElement("div",{className:"dot2"}))}),X=Object(u.b)(function(e){return{posts:e.posts}})(function(e){var t=e.posts,n=t.posts,c=t.loading;return r.a.createElement(a.Fragment,null,c&&r.a.createElement(P,null),r.a.createElement("ul",null,n&&n.map(function(e){return e.description&&r.a.createElement("li",{key:e.id},r.a.createElement("img",{style:{width:"30px",display:"inline"},src:e.owner.avatar_url,alt:"avatar url"}),r.a.createElement("span",null,e.description))})))}),Y=function(e){function t(){return Object(y.a)(this,t),Object(j.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getData)()}},{key:"render",value:function(){var e=this.props,t=e.posts,n=e.auth.loggedIn;return r.a.createElement(U.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(K,null),r.a.createElement(X,{posts:t}),r.a.createElement(z,{authed:n})))}}]),t}(a.Component),Z=Object(u.b)(function(e){return{posts:e.posts,auth:e.auth}},function(e){return{getData:function(){e(function(){var e=Object(I.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"posts/REQUEST"}),e.prev=1,e.next=4,r="gists/public",F.a.get("".concat("https://api.github.com","/").concat(r));case 4:return n=e.sent,a=n.data,e.abrupt("return",t({type:"posts/REQUEST_SUCCESS",data:a}));case 9:e.prev=9,e.t0=e.catch(1),t({type:"posts/REQUEST_FAIL"});case 12:case"end":return e.stop()}var r},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}())}}})(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=function(){var e=Object(s.createStore)(k,Object(p.composeWithDevTools)(Object(s.applyMiddleware)(l.a)));return{store:e,persistor:Object(h.b)(e)}}(),te=ee.store,ne=ee.persistor;o.a.render(r.a.createElement(u.a,{store:te},r.a.createElement(i.a,{loading:null,persistor:ne},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,2,1]]]);
//# sourceMappingURL=main.f81cfa1e.chunk.js.map