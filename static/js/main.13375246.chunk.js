(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,n){},177:function(e,t,n){},181:function(e,t,n){},202:function(e,t,n){},204:function(e,t,n){},206:function(e,t,n){},208:function(e,t,n){},210:function(e,t,n){},213:function(e,t,n){},215:function(e,t,n){},217:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(37),c=n.n(o),s=n(2),i=n(63),l=n(10),u=n(64),p=n(65),d=n(66),m=n.n(d),h=n(39),f=n(5),E=n(21),b={loading:!1,loggedIn:!1,token:null,message:null,user:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token/REQUEST":return Object(f.a)({},e,{loading:!0});case"token/REQUEST_SUCCESS":return Object(f.a)({},e,{loggedIn:!0,loading:!1,token:t.payload.token,user:t.payload.user.data});case"token/REQUEST_FAIL":return Object(f.a)({},e,{loading:!1,message:"Error"});case"token/LOGOUT":return Object(f.a)({},e,{loggedIn:!1,token:null,user:null});default:return e}},g={showModal:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;switch((arguments.length>1?arguments[1]:void 0).type){case"modal/SHOW":return Object(f.a)({},e,{showModal:!e.showModal});default:return e}},S=Object(l.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/REQUEST":return Object(f.a)({},e,{loading:!0,error:null});case"posts/REQUEST_SUCCESS":return Object(f.a)({},e,{loading:!1,posts:t.data,error:null});case"posts/REQUEST_FAIL":return Object(f.a)({},e,{loading:!1,error:t.error,posts:null});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"post/REQUEST":case"post-update/REQUEST":return Object(f.a)({},e,{loading:!0});case"post/REQUEST_SUCCESS":return Object(E.toast)("the publication was created correctly"),Object(f.a)({},e,{loading:!1});case"post-update/REQUEST_SUCCESS":return Object(E.toast)("the publication was updated correctly"),Object(f.a)({},e,{loading:!1});case"post/REQUEST_FAIL":case"post-update/REQUEST_FAIL":return Object(f.a)({},e,{loading:!1,error:"Error while create post"});default:return e}},auth:v,ui:O}),y={key:"root",storage:m.a,blacklist:["post"]},k=Object(h.a)(y,S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=n(11),_=n(12),w=n(15),T=n(14),U=n(16),N=n(224),C=n(226),x=n(223),R=n(225),Q=function(){return r.a.createElement("div",{className:"l-container container"},"Error 404")},L=(n(89),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"dot1"}),r.a.createElement("div",{className:"dot2"}))}),I=n(67),P=n.n(I),A=n(222),F=n(68),M=n.n(F),D=(n(171),function(e){return r.a.createElement("button",{className:"button "+e.theme,onClick:e.onClick,id:e.id,type:"button"},e.text)}),q=(n(175),n(177),function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("input",{onChange:e.onChange,value:e.value,id:e.id,className:"input "+e.theme,type:e.type,minLength:e.minLength,name:e.name,placeholder:e.placeholder,required:e.required,defaultValue:e.default,autoComplete:e.autoComplete,disabled:e.disabled,ref:e.ref}))}),W=function(e){return r.a.createElement("div",{className:e.classes},r.a.createElement("input",{type:"submit",className:"button "+e.theme,value:e.text,disabled:e.disabled}))},B=(n(181),function(e){return r.a.createElement("div",{className:e.classes},r.a.createElement("label",{className:""},e.label),r.a.createElement("textarea",{cols:"30",rows:"15",value:e.value,id:e.id,className:"input "+e.theme,type:e.type,minLength:e.minLength,name:e.name,placeholder:e.placeholder,required:e.required,defaultValue:e.default,disabled:e.disabled,ref:e.ref}))}),H=n(28),z=n(7),G=n.n(z),V=n(18),J=n(19),$=n.n(J),K=function(){function e(){Object(j.a)(this,e)}return Object(_.a)(e,null,[{key:"get",value:function(e){return $.a.get("".concat("https://api.github.com","/").concat(e))}},{key:"post",value:function(e,t){return $()({method:"POST",url:"https://api.github.com/gists",data:e,headers:{"Content-Type":"application/json",authorization:"token ".concat(t)}})}},{key:"update",value:function(e,t,n){return $()({method:"PATCH",url:"https://api.github.com/gists/".concat(e),data:t,headers:{"Content-Type":"application/json",authorization:"token ".concat(n)}})}}]),e}(),X="https://github.com/login/oauth/authorize?client_id=".concat("a9b9a9cdd993b995f360","&scope=user,gist&redirect_uri=").concat("http://localhost:3000/"),Y=function(e){return $.a.post("".concat("https://github.com/login/oauth/access_token","?client_id=").concat("a9b9a9cdd993b995f360","&client_secret=").concat("4c689dd1d7bc53aa6482bfb09b2edf6d0436cd29","&code=").concat(e))},Z=function(e){return $.a.get("".concat("https://api.github.com/user?access_token=").concat(e))},ee=function(e){return function(){var t=Object(V.a)(G.a.mark(function t(n){var a,r;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:"posts/REQUEST"}),""!==e){t.next=3;break}return t.abrupt("return",n({type:"posts/REQUEST_SUCCESS",data:null}));case 3:return t.prev=3,t.next=6,K.get("users/".concat(e.trim(),"/gists"));case 6:return a=t.sent,r=a.data,t.abrupt("return",n({type:"posts/REQUEST_SUCCESS",data:r}));case 11:t.prev=11,t.t0=t.catch(3),n({type:"posts/REQUEST_FAIL",error:t.t0.message});case 14:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},te=(n(202),function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleOnSubmit=function(e){e.preventDefault();var t=n.props,a=t.handleOnCreatePost,r=t.handleOnUpdatePost,o=t.auth,c=o.token,s=o.user,i=t.update,l=t.postToUpdate,u=e.target,p={description:u.description.value,public:!0,files:{"post.md":{content:u.content.value}}};i?r(l.id,p,c):a(p,c,s)},n}return Object(U.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=H.entityTitle,t=H.updateEntityTitle,n=H.entityFields,a=this.props,o=a.post.loading,c=a.update,s=a.postToUpdate;return r.a.createElement("section",{className:"form-container"},r.a.createElement("h1",{className:"headline"},c?t:e),r.a.createElement("form",{className:"form",onSubmit:this.handleOnSubmit},n.map(function(e){return"input"===e.kind?r.a.createElement(q,{type:e.type,name:e.name,id:e.id,placeholder:e.placeholder,key:e.id,required:!0,default:s&&s[e.name]}):"textarea"===e.kind?r.a.createElement(B,{name:e.name,id:e.id,placeholder:e.placeholder,key:e.id,required:!0,default:s&&s.files&&s.files["post.md"]&&s.files["post.md"].content}):null}),o&&r.a.createElement(L,null),r.a.createElement(E.ToastContainer,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,pauseOnVisibilityChange:!0}),r.a.createElement(W,{theme:"button--secondary",text:"Publish"})))}}]),t}(a.Component)),ne=Object(s.b)(function(e){return{auth:e.auth,post:e.post}},function(e){return{handleOnCreatePost:function(t,n,a){e(function(e,t){return function(){var n=Object(V.a)(G.a.mark(function n(a){return G.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"post/REQUEST"}),n.prev=1,n.next=4,K.post(e,t);case 4:return n.abrupt("return",a({type:"post/REQUEST_SUCCESS"}));case 7:n.prev=7,n.t0=n.catch(1),a({type:"post/REQUEST_FAIL"});case 10:case"end":return n.stop()}},n,this,[[1,7]])}));return function(e){return n.apply(this,arguments)}}()}(t,n))},handleOnUpdatePost:function(t,n,a){e(function(e,t,n){return function(){var a=Object(V.a)(G.a.mark(function a(r){return G.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"post-update/REQUEST"}),a.prev=1,a.next=4,K.update(e,t,n);case 4:return a.abrupt("return",r({type:"post-update/REQUEST_SUCCESS"}));case 7:a.prev=7,a.t0=a.catch(1),r({type:"post-update/REQUEST_FAIL"});case 10:case"end":return a.stop()}},a,this,[[1,7]])}));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}})(te),ae=(n(204),function(e){var t=e.show,n=e.closeModal,a=e.children;return r.a.createElement("div",{className:t?"modal modal--show":"modal"},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__close",onClick:n},r.a.createElement("span",{className:"icon-close icon"}),"x"),a))}),re=(n(206),Object(s.b)(function(e){return{auth:e.auth,ui:e.ui}},function(e){return{handleOnShowModal:function(){e({type:"modal/SHOW"})}}})(function(e){var t=e.post,n=e.large,a=e.auth,o=e.ui.showModal,c=e.handleOnShowModal;return r.a.createElement("li",{className:n?"posts-item posts-item--large":"posts-item"},r.a.createElement("h6",null,new Date(t.updated_at).toDateString().slice(4)," ","-"," ",r.a.createElement(P.a,{date:t.updated_at})),r.a.createElement("div",{className:"posts-item__content"},r.a.createElement("p",{className:"posts-item__description"},t.description),!n&&r.a.createElement("div",{className:"posts-item__post"},r.a.createElement(A.a,{className:"posts-item__link",to:"/post/".concat(t.id)},"Read"))),t.owner&&a.user&&t.owner.login===a.user.login&&n&&r.a.createElement(D,{onClick:c,theme:"button--secondary posts-item--edit",text:"Edit"}),n&&r.a.createElement("div",null,Object.values(t.files).map(function(e,t){return r.a.createElement("div",{key:t,className:"posts-item__text"},r.a.createElement(M.a,{source:e.content}))})),r.a.createElement(ae,{show:o,closeModal:c},r.a.createElement(ne,{update:!0,postToUpdate:t})))})),oe=(n(208),n(210),Object(s.b)(null,function(e){return{handleOnSearch:function(t){e(ee(t))}}})(function(e){var t=e.handleOnSearch;return r.a.createElement("section",{className:"form-container"},r.a.createElement("form",{className:"form-search",onSubmit:function(e){e.preventDefault(),t(e.target.username.value)}},r.a.createElement("h1",{className:"headline"},"SEARCH"),r.a.createElement(q,{onChange:function(e){""===e.target.value&&t("")},name:"username",placeholder:"Username..."})))})),ce=Object(s.b)(function(e){return{posts:e.posts}})(function(e){var t=e.posts,n=t.posts,a=t.loading,o=t.error;return r.a.createElement("div",null,r.a.createElement(oe,{posts:!!n}),n&&n[0]&&r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{className:"posts-item__avatar",src:n[0].owner.avatar_url&&n[0].owner.avatar_url,alt:"avatar url"}),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n[0].owner.html_url,className:"posts-item__author"},n[0].owner.login)),r.a.createElement("ul",{className:n?"posts posts--show":"posts"},r.a.createElement("h5",null,"POSTS"),n&&n.map(function(e){return e.description&&r.a.createElement(re,{key:e.id,post:e})})),a&&r.a.createElement("div",{className:"loader"},r.a.createElement(L,null)),n&&!n.length&&"Not post",o&&r.a.createElement("p",null,o))}),se=Object(s.b)(function(e){return{auth:e.auth}})(function(e){var t=e.posts;return r.a.createElement("div",{className:"l-container container container--auth"},r.a.createElement(ne,null),r.a.createElement(ce,{posts:t}))}),ie=function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getToken,t=this.props.location.search.replace("?code=","");t&&e(t)}},{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",{className:"l-container container"},r.a.createElement(ce,{posts:e}))}}]),t}(a.Component),le=Object(s.b)(function(e){return{auth:e.auth,posts:e.posts}},function(e){return{getToken:function(t){e(function(e){return function(){var t=Object(V.a)(G.a.mark(function t(n){var a,r,o,c;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"token/REQUEST"}),t.prev=1,t.next=4,Y(e);case 4:return a=t.sent,t.next=7,a.data.replace("access_token=","").replace("&scope=gist%2Cuser&token_type=bearer","");case 7:return r=t.sent,t.next=10,Z(r);case 10:return o=t.sent,c={token:r,user:o},t.abrupt("return",n({type:"token/REQUEST_SUCCESS",payload:c}));case 15:t.prev=15,t.t0=t.catch(1),n({type:"token/REQUEST_FAIL"});case 18:case"end":return t.stop()}},t,this,[[1,15]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(ie),ue=n(69),pe=n.n(ue),de=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={post:null,loading:null,index:null},n.getPost=function(){var e=Object(V.a)(G.a.mark(function e(t){var a,r,o;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0,post:null}),e.prev=1,e.next=4,K.get("gists/".concat(t.id));case 4:a=e.sent,r=a.data,o=n.props.posts.posts,n.setState({post:r,loading:!1,index:o.findIndex(function(e){return e.id===r.id})+1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(U.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.getPost(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params;this.getPost(t)}},{key:"render",value:function(){var e=this.state,t=e.post,n=e.loading,a=this.props.posts.posts;return r.a.createElement("div",{className:"l-container container"},a[this.state.index]&&r.a.createElement(A.a,{className:"next",to:"/post/".concat(a[this.state.index].id)},r.a.createElement("img",{className:"next__img",src:pe.a,alt:"arrow"})),t&&r.a.createElement(re,{large:!0,post:t}),n&&r.a.createElement("div",{className:"posts-item__loader"},r.a.createElement(L,null)))}}]),t}(a.Component),me=Object(s.b)(function(e){return{posts:e.posts}})(de),he=function(e){var t=e.component,n=e.authed,a=e.rest;return r.a.createElement(C.a,Object.assign({},a,{render:function(e){return!0===n?r.a.createElement(t,e):r.a.createElement(x.a,{to:{pathname:"/",state:{from:e.location}}})}}))},fe=function(e){var t=e.component,n=e.authed,a=e.rest;return r.a.createElement(C.a,Object.assign({},a,{render:function(e){return!1===n?r.a.createElement(t,e):r.a.createElement(x.a,{to:"/posts"})}}))},Ee=function(e){var t=e.authed;return r.a.createElement(a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(fe,{path:"/",authed:t,exact:!0,component:le}),r.a.createElement(he,{path:"/posts",authed:t,exact:!0,component:se}),r.a.createElement(C.a,{path:"/post/:id",authed:t,exact:!0,component:me}),r.a.createElement(C.a,{component:Q})))},be=(n(213),Object(s.b)(function(e){return{auth:e.auth}},function(e){return{handleOnRedirect:function(){e(function(){var e=Object(V.a)(G.a.mark(function e(t){var n,a,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"redirect/REQUEST"}),e.prev=1,e.next=4,$.a.get("".concat(X));case 4:return n=e.sent,a=n.request,r=a.responseURL,window.location=r,e.abrupt("return",t({type:"redirect/REQUEST_SUCCESS"}));case 11:e.prev=11,e.t0=e.catch(1),t({type:"redirect/REQUEST_FAIL"});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}())},handleOnLogout:function(){e({type:"token/LOGOUT"})},handleOnSearch:function(t){e(ee(t))}}})(function(e){var t=e.handleOnRedirect,n=e.handleOnLogout,a=e.auth,o=a.loggedIn,c=a.user;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-container l-container"},r.a.createElement(A.a,{className:"header__link",to:o?"/posts":"/"},"BLOG"),!o&&r.a.createElement(D,{text:"Sign in",onClick:function(){return t()}}),o&&c&&r.a.createElement("div",{className:"header__profile"},r.a.createElement("span",null,c.login),r.a.createElement("img",{className:"header__avatar",src:c.avatar_url,alt:""}),r.a.createElement(D,{text:"Logout",onClick:function(){return n()}}))))})),ve=(n(215),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props.auth.loggedIn;return r.a.createElement(N.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(be,null),r.a.createElement(Ee,{authed:e})))}}]),t}(a.Component)),ge=Object(s.b)(function(e){return{auth:e.auth}})(ve),Oe=(n(217),function(){var e=Object(l.createStore)(k,Object(p.composeWithDevTools)(Object(l.applyMiddleware)(u.a)));return{store:e,persistor:Object(h.b)(e)}}()),Se=Oe.store,ye=Oe.persistor;c.a.render(r.a.createElement(s.a,{store:Se},r.a.createElement(i.a,{loading:null,persistor:ye},r.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e){e.exports={entityTitle:"NEW POST",updateEntityTitle:"UPDATE POST",entityFields:[{kind:"input",type:"text",name:"description",id:"description",placeholder:"Title..."},{kind:"textarea",type:"text",name:"content",id:"content",placeholder:"Text..."}]}},69:function(e,t,n){e.exports=n.p+"static/media/right-arrow.00ff0323.svg"},70:function(e,t,n){e.exports=n(221)},89:function(e,t,n){}},[[70,2,1]]]);
//# sourceMappingURL=main.13375246.chunk.js.map